{% load static %}
<link rel="stylesheet" href="{% static 'list/style.css' %}">
<h1>Projects</h1>
<a href="{% url 'admin:list_construct_add' %}">add a project</a>
<br><br>
{% if active_construct_list %}
<table id='construct_list'>
    <thead>
        <th>Project name</th>
        <th>Progress</th>
        <th>Chart</th>
        <th title="Full cost of the project with Company Profit and VAT.">Cost<sup>?</sup></th>
        <th title="Will be equal to Cost, when the project is 100% done.">Pogressed<sup>?</sup></th>
        <th title="Current income according to incoming transactions.">Income<sup>?</sup></th>
        <th title="Current outcome according to outgoing transactions.">Outcome<sup>?</sup> =</th>
        <th>Expenses +</th>
        <th>Salaries<br>paid</th>
        <th>Company<br>Profit</th>
        <th title="(Income &minus; VAT) * 0.13">Owner<sup>?</sup><br>Profit</th>
        <th title="Income &minus; VAT &minus; Owner Profit &minus; Outcome.">Salaries<sup>?</sup><br>Part</th>
        <th title="Progressed &minus; Income. Invoice the client, if this is positive.">_Progress<sup>?</sup><br>Income</th>
        <th title="Received invoices, which need to be payed. (Outcome.)">Invoices<sup>?</sup><br>to Pay (debt)</th>
        <th title="Sent invoices, which are not payed yet. (Income.)">Requested<sup>?</sup><br>Payments</th>
    </thead>
    <tbody>
    {% for construct in active_construct_list %}
        <tr>
        <td>
            <a href="{% url 'list:detail' construct.id %}">{{ construct.title_text }}</a>
        </td>
        <td align='left' class='progress-cell'>
            <div class='project-progress' style='width: {{ construct.overall_progress_percent_num }}%'>
                {{ construct.overall_progress_percent_num|floatformat:2 }}&nbsp;%
            </div>
        </td>
        <td>
            <a href="{% url 'list:gantt' construct.id %}">Gantt</a>
        </td>
        <td align ='right'>
            {{ construct.full_cost }}
        </td>
        <td align ='right'>
            {{ construct.full_progress_cost }}
        </td>
        <td align ='right'>
            {{ construct.round_income }}
        </td>
        <td align ='right'>
            {{ construct.round_outcome }}
        </td>
        <td align ='right'>
            {{ construct.round_expenses }}
        </td>
        <td align ='right'>
            {{ construct.round_salaries }}
        </td>
        <td align ='right'>
            {{ construct.company_profit }}<br>
            ({{ construct.company_profit_percent|floatformat:1 }}%)
        </td>
        <td align ='right'>
            {{ construct.owner_profit }}
        </td>
        <td align ='right'>
            {{ construct.salaries_part }}
        </td>
        <td align ='right'>
            {{ construct.progress_minus_income }}
        </td>
        <td align ='right'>
            {{ construct.invoices_to_pay }}
        </td>
        <td align ='right'>
            {{ construct.invoices_pending_pay }}
        </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<!--br><br>
<table id='construct_money_scope'>
    <thead>
        <tr>
            <th>Price of<br>non-finished</th>
            <th>Price + VAT</th>
            <th>Profit</th>
            <th>Paid</th>
            <th>To be paid<br>for progress</th>
            <th>Worker<br>invoices</th> <-- Which need to be paid >
        </tr>
    </thead>
<tbody>
    <tr>
        <td>&#163; {{ price|floatformat:2 }}</td>
        <td>&#163; {{ price_vat|floatformat:2 }}</td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</tbody>
</table-->
{% else %}
    <p>No projects are available.</p>
{% endif %}
