{% load static %}
<script src="{% static 'list/detail.js' %}"></script>
<link rel="stylesheet" href="{% static 'list/style.css' %}">
<h1>{{ construct.title_text }}</h1> &larr; <a href="{% url 'list:index' %}">back to the project list</a>
<br><br>
<a href="">Save this project as...</a> (when clicked, the name field appears)<br><br>

<table>
<tbody>
<tr>
    <td><b>Address:</b></td>
    <td onclick='modify(this);'>{{ construct.address_text }}</td>
</tr>
<tr>
    <td><b>Email:</b></td>
    <td>{{ construct.email_text }}</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td><b>Total:</b></td>
    <td id='project_total'>&#163; {{ construct_total }}</td>
</tr>
<tr>
    <td><b>Phone:</b></td>
    <td>{{ construct.phone_text }}</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td><b>VAT:</b></td>
    <td id='project_vat'>{{ construct.vat_percent_num }}%</td>
</tr>
<tr>
    <td><b>Owner:</b></td>
    <td>{{ construct.owner_name_text }}</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td><b>Total + VAT:</b></td>
    <td id='project_total_vat'>&#163; {{ construct_total_vat }}</td>
</tr>
</tbody>
</table>

<br><br>
<form>
<table id='choices'>
<thead><tr>
    <td>
        <a href="#" onclick="return addRow(0, 'Choice');">task</a> |
        <a href="#" onclick="return addRow(0, 'Header2');">head</a>
    </td>
    <th>Name</th>
    <th>Unit price</th>
    <th>Quantity</th>
    <th><!--Units--></th>
    <th>Total price</th>
    <th>Assigned to</th>
    <th>Date start</th>
    <th>Planned days</th>
    <th>Progress</th>
    <th></th>
    <th></th>
</tr></thead>
<tbody>
{% for items in ch_list %}
    <tr id='tr_{{ items.choice.id }}' class='Choice'>
    <td>
        <a href="#" onclick="return addRow({{ items.idx }}, 'Choice');">task</a> |
        <a href="#" onclick="return addRow({{ items.idx }}, 'Header2');">head</a>
    </td>
    <td>{{ items.choice.name_txt }}</td>
    <td align='right'>&#163;{{ items.choice.price_num }}</td>
    <td align='right'>{{ items.choice.quantity_num }}</td>
    <td align='left'>{{ items.choice.units_of_measure_text }}</td>
    <td align='right'>&#163;{{ items.choice_total_price }}</td>
    <td>
    <select>
    {% for worker in items.choice.workers.all %}
        <option>{{ worker.name }}</option>
    {% endfor %}
    </select>
    </td>
    <td>{{ items.choice.plan_start_date }}</td>
    <td align='center'>{{ items.choice.plan_days_num }}</td>
    <td><progress max='100' value='{{ items.choice.progress_percent_num }}'></progress></td>
    <td align='right'>{{ items.choice.progress_percent_num }} %</td>
    <td class='del_modif_cell'>
        <a href='#' onclick="return setDelete(this);"
                    onmouseover="delMouseOver(this);"
                    onmouseout="delMouseOut(this);">delete</a>
        &nbsp;|&nbsp;
        <a href='#' onclick="return modifyRow(this);"
                    onmouseover="delMouseOver(this);"
                    onmouseout="delMouseOut(this);">modify</a>
    </td>
    </tr>
{% endfor %}
</tbody>
</table>
<table>
<tr>
    <td><input type='submit' value='Save new task(s)'></td>
    <td><button onclick="freezeActiveRow(); return false;">freeze</button></td>
    <td><a href='#' onclick="test1(); return false;">test1</td>
    <td><a href='#' onclick="test2(); return false;">test2</td>
    <td><button id='PrettyRawBtn' onclick="showPrettyRaw(this); return false;">Show Pretty</button></td>
</tr>
</table>
</form>
<div style='display:none' id='active_row'>-1</div>
